<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>MeloCrim Museum</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="countdown-style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    </head>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        // --- 1. SETUP ELEMENTS ---
        const container = document.getElementById('museumCarousel');
        const cards = document.querySelectorAll('.memory-card');
        const modal = document.getElementById('storyModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeBtn = document.querySelector('.close-btn');
        const envelope = document.querySelector('.envelope-overlay');

        // NEW: Lock & Timer Elements
        const glassCase = document.getElementById('glassCase');
        const scrollContainer = document.getElementById('scrollContainer');
        const passInput = document.getElementById('passInput');
        const unlockBtn = document.getElementById('unlockBtn');
        const errorMsg = document.getElementById('errorMsg');
        const statusText = document.getElementById('statusText');

        // --- 2. CAROUSEL LOGIC ---
        function updateCarousel() {
            if(!container) return; // Safety check
            const containerCenter = container.getBoundingClientRect().left + (container.offsetWidth / 2);

            cards.forEach((card, index) => {
                const cardRect = card.getBoundingClientRect();
                const cardCenter = cardRect.left + (cardRect.width / 2);
                const distance = cardCenter - containerCenter;
                const absDistance = Math.abs(distance);
                
                let rotate = distance / 10; 
                if (rotate > 45) rotate = 45;
                if (rotate < -45) rotate = -45;

                const zIndex = 100 - Math.floor(absDistance / 10);
                card.style.zIndex = zIndex;

                if (absDistance < 100) {
                    card.style.transform = `scale(1.1) rotateY(0deg)`;
                    card.style.opacity = "1";
                    card.style.filter = "blur(0px) grayscale(0%)";
                    card.classList.add('active');
                } else {
                    card.style.transform = `scale(0.85) rotateY(${rotate}deg)`;
                    card.style.opacity = "0.6";
                    card.style.filter = "blur(1px) grayscale(40%)";
                    card.classList.remove('active');
                }
            });
        }

        // --- 3. CLICK CARD HANDLING ---
        cards.forEach(card => {
            card.addEventListener('click', (e) => {
                if (card.classList.contains('active')) {
                    const title = card.querySelector('h2').innerText;
                    const fullStory = card.querySelector('.desc-pop').innerHTML;
                    modalTitle.innerText = title;
                    modalBody.innerHTML = fullStory;
                    modal.style.display = "block";
                } else {
                    const cardLeft = card.offsetLeft;
                    const scrollPos = cardLeft - (container.offsetWidth / 2) + (card.offsetWidth / 2);
                    container.scrollTo({ left: scrollPos, behavior: 'smooth' });
                }
            });
        });

        // Initialize Carousel
        if(container) {
            container.addEventListener('scroll', updateCarousel);
            window.addEventListener('resize', updateCarousel);
            updateCarousel();
        }

        // Modal Closing
        if(closeBtn) closeBtn.onclick = () => modal.style.display = "none";
        window.onclick = (event) => {
            if (event.target == modal) modal.style.display = "none";
        }

        // --- 4. SCROLL OBSERVER (DARK MODE) ---
        const carouselSection = document.querySelector('.carousel-wrapper');
        const observerOptions = { root: null, threshold: 0.4 };

        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                    document.body.classList.remove('letter-open'); 
                    if(envelope) envelope.classList.remove('shake-active'); 
                }
            });
        }, observerOptions);

        if(carouselSection) scrollObserver.observe(carouselSection);

        // --- 5. ENVELOPE INTERACTION ---
        if(envelope) {
            envelope.addEventListener('click', () => {
                if (document.body.classList.contains('letter-open')) return;
                
                // 1. Play Music Immediately on Click (Required for iPhone)
                const music = document.getElementById('bgMusic');
                if(music) {
                    music.volume = 0.5; // Set volume to 50% so it's not too loud
                    music.play().catch(error => console.log("Music play failed:", error));
                }

                // 2. Start Animation
                envelope.classList.add('shake-active');
                setTimeout(() => {
                    document.body.classList.add('letter-open');
                }, 500);
            });
        }

        // --- 6. LOCK & TIMER LOGIC (THIS WAS MISSING) ---
        const CORRECT_PASS = "melocrim143";

        if(unlockBtn) {
            unlockBtn.addEventListener('click', handleUnlock);
        }
        
        if(passInput) {
            passInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleUnlock();
            });
        }

        function handleUnlock() {
            if(passInput.value === CORRECT_PASS) {
                // Success
                errorMsg.style.opacity = "0";
                glassCase.classList.add('shattered'); // Fade out lock

                // Reveal Scroll
                setTimeout(() => {
                    scrollContainer.classList.add('unrolled');
                    startScrollTimer();
                }, 800);
            } else {
                // Error
                errorMsg.style.opacity = "1";
                passInput.classList.add('shake-active');
                setTimeout(() => passInput.classList.remove('shake-active'), 500);
            }
        }

        function startScrollTimer() {
            // *** TARGET DATE: Feb 14, 2026 ***
            const targetDate = new Date("October 24, 2026 00:00:00").getTime();

            const interval = setInterval(() => {
                const now = new Date().getTime();
                const distance = targetDate - now;

                if (distance < 0) {
                    clearInterval(interval);
                    document.querySelector('.classic-timer').innerHTML = "<h3>The wait is over!</h3>"; 
                    if(statusText) {
                         statusText.innerText = "She said Yes!";
                         statusText.style.color = "#00b894"; // Green for success
                    }
                    return;
                }

                // Time Math
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Binary Conversion
                const binDays = days.toString(2).padStart(9, '0');    
                const binHours = hours.toString(2).padStart(5, '0');  
                const binMins = minutes.toString(2).padStart(6, '0'); 
                const binSecs = seconds.toString(2).padStart(6, '0'); 

                // Update UI
                if(document.getElementById('days')) document.getElementById('days').innerText = binDays;
                if(document.getElementById('hours')) document.getElementById('hours').innerText = binHours;
                if(document.getElementById('minutes')) document.getElementById('minutes').innerText = binMins;
                if(document.getElementById('seconds')) document.getElementById('seconds').innerText = binSecs;

                // Update Status Text
                if(statusText) updateMysteryMessage(days, statusText);

            }, 1000);
        }

        function updateMysteryMessage(days, element) {
            let msg = "";
            if (days > 300) msg = "Data compiling... Patience is required.";
            else if (days > 200) msg = "Establishing secure connection...";
            else if (days > 100) msg = "Confidence Building up... Decrypting.";
            else if (days > 50) msg = "Protocol accelerated. Heart rate increasing.";
            else if (days > 10) msg = "Final preparations. The moment is near.";
            else msg = "CRITICAL: SYSTEM READY FOR DEPLOYMENT.";

            if (element.innerText !== msg) element.innerText = msg;
        }

        // --- LEAF GENERATOR ---
    function createLeaf() {
        const leaf = document.createElement('div');
        leaf.classList.add('leaf');
        
        // Randomize position
        leaf.style.left = Math.random() * 100 + 'vw';
        
        // Randomize animation duration (speed)
        const duration = Math.random() * 5 + 5; // Between 5s and 10s
        leaf.style.animationDuration = duration + 's';
        
        // Randomize size slightly
        const size = Math.random() * 15 + 15; // Between 15px and 30px
        leaf.style.width = size + 'px';
        leaf.style.height = size + 'px';
        
        // Randomize leaf color (Green to Autumn Gold)
        // Note: This filter only works because the SVG is set to a base green color
        const hueRotate = Math.random() * 60; // 0 to 60deg shift
        leaf.style.filter = `hue-rotate(${hueRotate}deg)`;

        document.body.appendChild(leaf);

        // Remove leaf after it falls to keep DOM clean
        setTimeout(() => {
            leaf.remove();
        }, duration * 1000);
    }

    // Create a new leaf every 400ms
    setInterval(createLeaf, 400);

    // ... end of script ...

    });
</script>

    <body>
        <audio id="bgMusic" loop>
        <source src="rewrite-the-stars.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>

        <div id="homepageTitle">
            <h1 class="main-header">Real Love Started Here</h1>
            <p class="main-header-desc">
                This website exhibits the growing love and history of
                melocrim from the first year they knew each other up
                until the present (2026). Enjoy exploring the <em>MeloCrim</em>
                Online Museum :D
            </p>
        </div>

        <div class="carousel-wrapper">
            <div class="envelope-overlay">
                <div class="envelope-body"></div>
                <div class="envelope-flap"></div>
                <div class="heart-seal">❤</div>
            </div>

            <div class="container" id="museumCarousel">
                <div class="memory-card year-2019">
                    <h2 class="year">2019 - Crush Era</h2>
                    <img src="./images/2019-photo.jpg">
                    <p class="desc"> This is the start of the story</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        This is the very first photo of us together. Let me just
                        share a little bit of my experience of what happened during this day.
                        I really want to make a move on 
                        her though I get very shy. 
                        </p>

                        <p>
                        I really do get very shy at that time but my friends encouraged me
                        and I took the initiative to have a photo with her, after having a photo
                        with her it literally made me proud and happy knowing that I got
                        my very first photo of my crush.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

                <div class="memory-card year-2020">
                    <h2 class="year">2020 - Pandemic Era</h2>
                    <img src="./images/2020-photo.jpg">
                    <p class="desc"> This is the <em>Call of Duty</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        This is the pandemic era, this is where we are stuck 
                        in our houses and we basically do online classes only though
                        even though we have that distance, we still got the time to bond with each other
                        and play with each other via <em> Call of Duty Mobile</em>. 
                        </p>
                        <p>
                        Everytime we play,
                        everytime we spoke in our cameras are the moment that I felt very happy.
                        Being able to have our interest sync at that time made me the happiest
                        person ever lived and I thank her so much for giving me that happiness.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                    
                </div>

                <div class="memory-card year-2021">
                    <h2 class="year">2021 - Ghost Era</h2>
                    <img src="./images/2021-photo.jpg">
                    <p class="desc"> This is the <em>Ghost</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        During this pandemic era - up until it the re-implementation of face-to-face 
                        classes is the time that I haven't been able to talk to my future wife. I felt
                        drained, I felt empty, because I didn't just lost her at that time but I also
                        fell away from God and my time consist of Axie Infinity, Games, and Schools.
                        This is the most empty era that I have ever experienced.
                        </p>
                        <p>
                        Everytime I play, I feel empty. Everytime I do stuffs, I really do feel empty.
                        Not talking to her at this era hurted my heart a lot. Heartaches after heartaches and it is so 
                        painful.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

                <div class="memory-card year-2022">
                    <h2 class="year">2022 - Missing her Era</h2>
                    <img src="./images/2022-photo.jpg">
                    <p class="desc"> This is the <em>Restoration</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        Pandemic is slowly dissappearing by this time. By this time, I already went to my school 
                        face to face and you know what? everytime I see her walking outside our room, evertime I see
                        her face, everytime I see her with someone else, and everytime I saw her having photo with someone.
                        It literally hurted me a lot. To the point that I just saw her and I find myself having a tear 
                        falling from my eye.
                        </p>
                        <p>
                        Eventually, one of my friend pushed me and encouraged me and it helped me a lot. By this time,
                        I also decided to return and surrender my life to the Lord again and he restored me, and my communication 
                        to my future wife. So the ending, we graduated together, and we sought school for our senior high era.
                        I'm so happy.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

                <div class="memory-card year-2023">
                    <h2 class="year">2023 - Getting to Know Each Other Era</h2>
                    <img src="./images/2023-photo.jpg">
                    <p class="desc"> This is the <em>Getting to know each other</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        So we are grade 11 by this time. This is the time that I am excited to be with her, to know her,
                        to seek more of her, and to get closer to her. I was a little bit - actually no, I am so shy by this time. 
                        I find it hard to you know, kind of approach her but eventually we got closer and I got to know more of her side.
                        </p>
                        <p>
                        This photo is very special, because it is our first date in Valenzuela City Museum. I just feel awestrucked
                        by her perfect beauty. I really like her a lot.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

                <div class="memory-card year-2024">
                    <h2 class="year">2024 - Moving Up 2.0 Era</h2>
                    <img src="./images/2024-photo.jpg">
                    <p class="desc"> This is the <em>Knowing more of each other</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        So we are grade 12 by this time and the photo shows of us graduating and moving up to college!!. 
                        This Senior High School journey of us is not easy. Temptations after temptations came, we did things that 
                        we shouldn't have done yet, and we are heavily guilty and convicted by the Lord at this time but eventually 
                        God restored out purity, our holiness, and our restoration to him.
                        </p>
                        <p>
                        I really cherished every moment, everyday, and everytime that I had with her during this Senior High School era.
                        I would not forget our laughters, our kulitan, our tampohan, everytime we walk in our Cornelia Street. Never in my life
                        I will forget it. I don't just like her, but I love her sincerely and genuinely by this time.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

                <div class="memory-card year-2025">
                    <h2 class="year">2025 - Freshman Era</h2>
                    <img src="./images/2025-photo.jpg">
                    <p class="desc"> This is the <em>Freshman</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        So we are in our 1st year college probably in our 2nd sem by this time. This is the time where 
                        we adjusted, we have new friends, we have new hobbies and habits but even still I am so happy 
                        because despite the adjustment and busyness of this time. We still had moments that no one can steal from us.
                        </p>
                        <p>
                        So in late 2025, we are now in our 2nd year college. I knew more of her, I love her smell, her eyes, her cheecks
                        her mouth, her breath, her armipit's smell, her skin's smell, everything. I really love her, and I promise to my self 
                        that I will marry her.
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

                <div class="memory-card year-2026">
                    <h2 class="year">2026 - ??? Era</h2>
                    <img src="./images/2026-photo.jpg">
                    <p class="desc"> This is the <em>Expecting More</em> era</p>

                    <div class="desc-pop" style="display:none;">
                        <p>
                        As of now, we are still expecting more but as you can see the photo here only had her face.
                        </p>
                        <p>
                        This will be the year of my commitment, I will commit to her, and I will marry her. Who knows what 
                        will happen this year! I THANK YOU GOD!
                        </p>
                    </div>

                    <p class="click-instruction">(Click to read the full story)</p>
                </div>

            </div>
        </div>

        <div id="storyModal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h2 id="modalTitle"></h2>
                <div id="modalBody"></div>
            </div>
        </div>

    <div class="courtship-section-wrapper">
    
        <div class="glass-case" id="glassCase">
            <div class="glass-content">
                <div class="wax-seal">❤</div>
                <h2 class="case-title">Restricted Artifact</h2>
                <p class="case-subtitle">Enter the password to break the seal</p>
                
                <div class="input-group">
                    <input type="password" id="passInput" placeholder="Password" autocomplete="off">
                    <button id="unlockBtn">Open Case</button>
                </div>
                <p id="errorMsg" class="error-msg">Incorrect Password</p>
            </div>
        </div>

        <div class="scroll-container" id="scrollContainer">
            <div class="scroll-rod top"></div>
            
            <div class="parchment-paper">
                <h2 class="scroll-header">The Vow of Time</h2>
                <p class="wish-annotation">"Sana Payagan"</p>
                <p class="scroll-verse">
                    "For every second that passes is a second closer to forever."
                </p>

                <div class="classic-timer">
                    <div class="time-box">
                        <span id="days">00</span>
                        <span class="label">Days</span>
                    </div>
                    <div class="separator">:</div>
                    <div class="time-box">
                        <span id="hours">00</span>
                        <span class="label">Hours</span>
                    </div>
                    <div class="separator">:</div>
                    <div class="time-box">
                        <span id="minutes">00</span>
                        <span class="label">Mins</span>
                    </div>
                    <div class="separator">:</div>
                    <div class="time-box">
                        <span id="seconds">00</span>
                        <span class="label">Secs</span>
                    </div>
                </div>

                <p class="scroll-footer">
                    Target: <strong>Crista Mae Buhion</strong><br>
                    Status: <span class="ink-status" id="statusText">Waiting for that Yes...</span>
                </p>
            </div>

            <div class="scroll-rod bottom"></div>
        </div>

    </div>


    <div class="credits-section">
        <div class="museum-divider">✦</div>
        
        <div class="credits-grid">
            <div class="credit-item">
                <span class="credit-role">Curated & Developed by</span>
                <h3 class="credit-name">John Carl Mauricio</h3>
            </div>
            
            <div class="credit-item">
                <span class="credit-role">Dedicated to</span>
                <h3 class="credit-name highlight">Crista Mae Buhion</h3>
            </div>
        </div>

        <div class="verse-container">
            <p class="verse-text">
                “But Ruth replied, ‘Don’t urge me to leave you or to turn back from you. 
                Where you go I will go, and where you stay I will stay. 
                Your people will be my people and your God my God.’”
            </p>
            <span class="verse-ref">— Ruth 1:16</span>
        </div>

        <div class="copyright">
            &copy; 2026 MeloCrim Museum. All Rights Reserved.
        </div>
    </div>
    </body>
</html>